<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <link href="../css/bootstrap-icons.css" rel="stylesheet">
    <link href="../css/stuff/main.css" rel="stylesheet">
    <link href="../css/stuff/bottomBar.css" rel="stylesheet">
    <script src="../js/bootstrap.bundle.min.js"></script>
</head>
<body data-bs-theme="dark">
    <h1 class="text-danger" style="margin: 30px;text-align: center;">
        <img src="../images/logos/NUGLOXLogo.png" class="mb-3" style="width: 70%;"><br>
        Your account has been disabled
    </h1>
    <div class="container" style="text-align: center;">
        <p>Your account has been banned for the following reason:</p>
        <p><strong>Ban Type</strong>: <span id="bantype">?</span></p>
        <p><strong>Reason</strong>: {{ban.banreason}}</p>
        <p id="unbandate"><strong>Unban Date</strong>: {{ban.unbantime}}</p>
        <p>If you believe this is an error, please contact support.</p>
        <button id="unban" class="btn btn-secondary mb-2" disabled>I understand, unban me</button>
        <p id="banNotExpired" class="text-danger">Your ban still hasn't expired. Re-launch the app to refresh.</p>
        <script>
        let authsetintervalthing = setInterval(() => {
            if(authSet) {
                clearInterval(authsetintervalthing);
                switch (accInfos.bantype) {
                    case 1:
                        document.querySelector("#bantype").innerText = "Warning";
                        break;
                    case 2:
                        document.querySelector("#bantype").innerText = "1 Day Ban";
                        break;
                    case 3:
                        document.querySelector("#bantype").innerText = "3 Days Ban";
                        break;
                    case 4:
                        document.querySelector("#bantype").innerText = "1 Week Ban";
                        break;
                    case 5:
                        document.querySelector("#bantype").innerText = "2 Weeks Ban";
                        break;
                    case 6:
                        document.querySelector("#bantype").innerText = "Definitive Ban";
                        break;
                }

                if(accInfos.bantype === 6)
                    document.querySelector("#unbandate").style.display = "none";

                if(accInfos.banexpired) {
                    document.querySelector("#unban").disabled = null;
                    document.querySelector("#unban").className = "btn btn-primary";
                    document.querySelector("#banNotExpired").style.display = "none";
    
                    document.querySelector("#unban").addEventListener("click", async () => {
                        document.querySelector("#unban").disabled = true;
                        document.querySelector("#unban").innerText = "Unbanning...";

                        const res = await requestAPI("v1/mobile/unban_request");

                        if(res.success) {
                            document.querySelector("#unban").className = "btn btn-success";
                            document.querySelector("#unban").innerText = "Success! Please wait...";
                            await RefreshAccInfos();
                            loadPage("home");
                        } else {
                            document.querySelector("#unban").className = "btn btn-danger";
                            document.querySelector("#unban").innerText = "Failed! Please try again. ";
                            setTimeout(() => {
                                document.querySelector("#unban").disabled = null;
                                document.querySelector("#unban").className = "btn btn-primary";
                                document.querySelector("#unban").innerText = "I understand, unban me";
                            }, 2000)
                        }
                    });
                }
            }
        });
        </script>
    </div>
    <div class="bottomBarMargin"></div>
    <script src="../js/stuff/main.js"></script> 
    <script src="../js/stuff/authenticator.js"></script> 
</body>
</html>